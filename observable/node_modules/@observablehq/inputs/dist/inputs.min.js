// @observablehq/inputs v0.12.0 Copyright 2021–2024 Observable, Inc.
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("htl@0.3.1/dist/htl.min.js")):"function"==typeof define&&define.amd?define(["exports","htl@0.3.1/dist/htl.min.js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Inputs=e.Inputs||{},e.htl)}(this,(function(e,t){"use strict";if("undefined"!=typeof document&&!document.querySelector(".inputs-3a86ea")){const e=document.createElement("style");e.className="inputs-3a86ea",e.textContent=".inputs-3a86ea{--length1:3.25px;--length2:6.5px;--length3:13px;--label-width:120px;--input-width:240px;font:13px/1.2 var(--sans-serif)}form.inputs-3a86ea{display:flex;align-items:center;flex-wrap:wrap;min-height:25.5px;margin:var(--length3) 0}form.inputs-3a86ea>label{width:100%;padding-bottom:3px}form.inputs-3a86ea-toggle{flex-wrap:nowrap}form.inputs-3a86ea-toggle>label{align-self:start;padding:5px 0 4px 0;margin-right:var(--length2)}form.inputs-3a86ea-toggle .inputs-3a86ea-input,form.inputs-3a86ea-toggle>label{width:initial}@media only screen and (min-width:30em){form.inputs-3a86ea{flex-wrap:nowrap;width:calc(var(--input-width) + var(--label-width));max-width:100%;margin:initial}form.inputs-3a86ea>label{flex-shrink:0;align-self:start;padding:5px 0 4px 0;width:var(--label-width);margin-right:var(--length2)}}.inputs-3a86ea button,.inputs-3a86ea input,.inputs-3a86ea select,.inputs-3a86ea table,.inputs-3a86ea textarea{color:inherit;font:inherit;box-sizing:border-box}.inputs-3a86ea button,.inputs-3a86ea input{line-height:normal}.inputs-3a86ea button{margin:0}.inputs-3a86ea button+button{margin-left:var(--length1)}.inputs-3a86ea-textarea{--input-width:520px}.inputs-3a86ea-textarea>div{width:100%;text-align:right}.inputs-3a86ea-textarea>div textarea{display:block;width:100%;margin:0;padding:4px;min-height:calc(2.5em + 8px);max-height:calc(14em + 8px);resize:vertical}.inputs-3a86ea-textarea>div button{margin:4px 0 0}.inputs-3a86ea input[type=checkbox],.inputs-3a86ea input[type=radio]{margin-right:var(--length2)}.inputs-3a86ea-input{display:flex;align-items:center;width:100%}.inputs-3a86ea-input>button,.inputs-3a86ea-input>input,.inputs-3a86ea-input>output{width:inherit;min-width:0}.inputs-3a86ea-input>button,.inputs-3a86ea-input>input[type=number],.inputs-3a86ea-input>output{flex-shrink:2.5}.inputs-3a86ea-input>output{white-space:pre;margin-left:var(--length2)}.inputs-3a86ea-input>button{margin-left:var(--length1)}.inputs-3a86ea-input>input[type=number]{font-variant-numeric:tabular-nums;flex-shrink:1.5;text-overflow:ellipsis}.inputs-3a86ea-input>input[type=color]~output{font-family:ui-monospace,var(--monospace)}.inputs-3a86ea-input:not(:only-child)>input[type=color]~output{flex-shrink:1}.inputs-3a86ea-input>input[type=range]{margin:0;margin-left:var(--length2)}.inputs-3a86ea-input>input[type=date],.inputs-3a86ea-input>input[type=datetime-local]{height:22px}form.inputs-3a86ea-checkbox{width:auto;max-width:640px}.inputs-3a86ea-checkbox div label{display:inline-flex;align-items:center;margin-right:var(--length3)}form.inputs-3a86ea-table{display:block;overflow-y:auto;width:100%}.inputs-3a86ea-table table{max-width:initial;min-height:33px;margin:0;border-collapse:separate;border-spacing:0;font-variant-numeric:tabular-nums}.inputs-3a86ea-table tr:not(:last-child) td,.inputs-3a86ea-table tr:not(:last-child) th{border-bottom:solid 1px #eee}.inputs-3a86ea-table thead tr td,.inputs-3a86ea-table thead tr th{border-bottom:solid 1px #ccc}.inputs-3a86ea-table thead th span{display:inline-block;width:.5em;margin-left:-.5em}.inputs-3a86ea-table td,.inputs-3a86ea-table th{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;padding:3px 6.5px 3px 0}.inputs-3a86ea-table tr>:not(:first-of-type){padding-left:var(--length2)}.inputs-3a86ea-table tr>:last-of-type{padding-right:var(--length3)}.inputs-3a86ea-table tr>:first-of-type{text-overflow:unset;width:19px}.inputs-3a86ea-table tr>:first-of-type input{opacity:0;margin:0 3px 1px 4px}.inputs-3a86ea-table tr:hover>:first-of-type input:enabled,.inputs-3a86ea-table tr>:first-of-type input:checked,.inputs-3a86ea-table tr>:first-of-type input:focus,.inputs-3a86ea-table tr>:first-of-type input[type=checkbox]:indeterminate{opacity:inherit}.inputs-3a86ea-table thead tr{border-bottom:none}.inputs-3a86ea-table thead th{position:sticky;top:0;background:#fff;cursor:ns-resize}.inputs-3a86ea-table tbody tr:first-child td{padding-top:4px}",document.head.appendChild(e)}function n(e){return null==e?null:"number"==typeof e?`${e}px`:`${e}`}function i(e){return{"--input-width":n(e)}}const a={bubbles:!0};function r(e){e.preventDefault()}function l({currentTarget:e}){(e.form||e).dispatchEvent(new Event("input",a))}function o(e){return e.checkValidity()}function u(e){return e}let s=0;function c(){return"inputs-3a86ea-"+ ++s}function d(e,n){if(e)return e=t.html`<label>${e}`,void 0!==n&&(e.htmlFor=n.id=c()),e}function f(e){return Array.isArray(e)?e:Array.from(e)}function p(e){return!!e&&"function"==typeof e[Symbol.iterator]}function m(e){return p(e.columns)?e.columns:e.schema&&p(e.schema.fields)?Array.from(e.schema.fields,(e=>e.name)):"function"==typeof e.columnNames?e.columnNames():void 0}function h(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return"function"==typeof t?t(e):t;const n=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),r=e.getUTCMilliseconds();return`${l=e.getUTCFullYear(),l<0?`-${v(-l,6)}`:l>9999?`+${v(l,6)}`:v(l,4)}-${v(e.getUTCMonth()+1,2)}-${v(e.getUTCDate(),2)}${n||i||a||r?`T${v(n,2)}:${v(i,2)}${a||r?`:${v(a,2)}${r?`.${v(r,3)}`:""}`:""}Z`:""}`;var l}function v(e,t){return`${e}`.padStart(t,"0")}const b=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function y(e){return null==e?"":`${e}`}const g=A((e=>{const t=$(e);return e=>null==e?"":"number"==typeof e?t(e):e instanceof Date?N(e):`${e}`})),$=A((e=>t=>0===t?"0":t.toLocaleString(e))),w=g(),x=$();function k(e){const t=e.toString(),n=t.length;let i,a=-1;e:for(let e=1;e<n;++e)switch(t[e]){case".":a=i=e;break;case"0":0===a&&(a=e),i=e;break;default:if(!+t[e])break e;a>0&&(a=0)}return a>0?t.slice(0,a)+t.slice(i+1):t}function N(e){return h(e,"Invalid Date")}function A(e){let t,n=A;return(i="en")=>i===n?t:t=e(n=i)}function S(e,t){return T(t)-T(e)||(e<t?-1:e>t?1:e>=t?0:NaN)}function E(e,t){return T(t)-T(e)||(t<e?-1:t>e?1:t>=e?0:NaN)}function T(e){return null!=e&&!Number.isNaN(e)}const O=([e])=>e,z=([,e])=>e;function j({multiple:e,render:t,selectedIndexes:n,select:i}){return function(a,{locale:o,keyof:s=(a instanceof Map?O:u),valueof:c=(a instanceof Map?z:u),format:d=(e=>(t,n,i)=>e(s(t,n,i)))(g(o)),multiple:p,key:m,value:h,disabled:v=!1,sort:b,unique:y,...$}={}){if("function"!=typeof s)throw new TypeError("keyof is not a function");if("function"!=typeof c)throw new TypeError("valueof is not a function");if("function"!=typeof d)throw new TypeError("format is not a function");void 0!==e&&(p=e),b=function(e){if(void 0===e||!1===e)return;if(!0===e||"ascending"===e)return S;if("descending"===e)return E;if("function"==typeof e)return e;throw new TypeError("sort is not a function")}(b);let w=+p;void 0===h&&(h=void 0!==m&&a instanceof Map?w>0?Array.from(m,(e=>a.get(e))):a.get(m):void 0),y=!!y;let x=(a=f(a)).map(((e,t)=>[s(e,t,a),t]));void 0!==b&&x.sort((([e],[t])=>b(e,t))),y&&(x=[...new Map(x.map((e=>[M(e[0]),e]))).values()]);const k=x.map(z);!0===p?w=Math.max(1,Math.min(10,k.length)):w>0?p=!0:(p=!1,w=void 0);const[N,A]=t(a,k,function(e,t,n,i,a){const r=new Set(void 0===n?[]:i?f(n):[n]);if(!r.size)return()=>!1;const l=new Set;for(const n of t)r.has(a(e[n],n,e))&&l.add(n);return e=>l.has(e)}(a,k,h,p,c),function(e,t,n,i){if("boolean"==typeof n)return n;const a=new Set(f(n)),r=new Set;for(const n of t)a.has(i(e[n],n,e))&&r.add(n);return e=>r.has(e)}(a,k,v,c),{...$,format:d,multiple:p,size:w});function T(e){if(e&&e.isTrusted&&N.removeEventListener("change",l),p)h=n(A).map((e=>c(a[e],e,a)));else{const e=function(e){return e.value?+e.value:-1}(A);h=e<0?null:c(a[e],e,a)}}return N.addEventListener("input",T),N.addEventListener("change",l),N.addEventListener("submit",r),T(),Object.defineProperty(N,"value",{get:()=>h,set(e){if(p){const t=new Set(e);for(const e of A){const n=+e.value;i(e,t.has(c(a[n],n,a)))}}else A.value=k.find((t=>e===c(a[t],t,a)));T()}})}}function M(e){return null!==e&&"object"==typeof e?e.valueOf():e}function q(e,n){return j({multiple:e,render(i,a,r,l,{format:o,label:u}){const s=t.html`<form class="inputs-3a86ea inputs-3a86ea-checkbox">
      ${d(u)}<div>
        ${a.map((e=>t.html`<label><input type=${n} disabled=${"function"==typeof l?l(e):l} name=input value=${e} checked=${r(e)}>${o(i[e],e,i)}`))}
      </div>
    </form>`;return[s,D(s.elements.input,e)]},selectedIndexes:e=>Array.from(e).filter((e=>e.checked)).map((e=>+e.value)),select(e,t){e.checked=t}})}const C=q(!1,"radio"),L=q(!0,"checkbox");function D(e,t){return void 0===e?new P(t?[]:null):void 0===e.length?new(t?F:_)(e):e}class P{constructor(e){this._value=e}get value(){return this._value}set value(e){}*[Symbol.iterator](){}}class _{constructor(e){this._input=e}get value(){const{_input:e}=this;return e.checked?e.value:""}set value(e){const{_input:t}=this;t.checked||(t.checked=y(e)===t.value)}*[Symbol.iterator](){yield this._input}}class F{constructor(e){this._input=e,this._value=e.checked?[e.value]:[]}get value(){return this._value}set value(e){const{_input:t}=this;t.checked||(t.checked=y(e)===t.value,this._value=t.checked?[t.value]:[])}*[Symbol.iterator](){yield this._input}}function I(e){if(void 0===e)return[null,null];const n=c();return[t.html`<datalist id=${n}>${Array.from(e,(e=>t.html`<option value=${y(e)}>`))}`,n]}function U(e,n,i,{validate:a=o,submit:u}={},{get:s=e=>e.value,set:c=(e,t)=>e.value=y(t),same:d=(e,t)=>e.value===t,after:f=e=>n.after(e)}={}){const p=(u=!0===u?"Submit":u||null)?t.html`<button type=submit disabled>${u}`:null;function m(){if(a(n))return i=s(n),!0}return u&&f(p),c(n,i),i=a(n)?s(n):void 0,e.addEventListener("submit",(function(e){r(e),u&&(m()?(p.disabled=!0,l(e)):n.reportValidity())})),n.oninput=function(e){u?(p.disabled=d(n,i),e.stopPropagation()):m()||e.stopPropagation()},Object.defineProperty(e,"value",{get:()=>i,set(e){c(n,e),m()}})}function K({label:e,value:n="",type:a="text",placeholder:r,pattern:l,spellcheck:o,autocomplete:u,autocapitalize:s,min:c,max:f,minlength:p,maxlength:m,required:h=p>0,datalist:v,readonly:b,disabled:y,width:g,...$}={}){const[w,x]=I(v),k=t.html`<input
    type=${a}
    name=text
    list=${x}
    readonly=${b}
    disabled=${y}
    required=${h}
    min=${c}
    max=${f}
    minlength=${p}
    maxlength=${m}
    pattern=${l}
    spellcheck=${H(o)}
    autocomplete=${R(u)}
    autocapitalize=${R(s)}
    placeholder=${r}
  >`;return U(t.html`<form class=inputs-3a86ea style=${i(g)}>
    ${d(e,k)}<div class=inputs-3a86ea-input>
      ${k}
    </div>${w}
  </form>`,k,n,$)}function H(e){return null==e?null:`${e}`}function R(e){return null==e?null:`${!1===e?"off":!0===e?"on":e}`}const V={type:"date",get:e=>e.valueAsDate,set:(e,t)=>e.value=B(t),same:(e,t)=>+e.valueAsDate==+t,format:B},W={type:"datetime-local",get:e=>e.value?new Date(e.value):null,set:(e,t)=>e.value=G(t),same:(e,t)=>+new Date(e.value)==+t,format:G};function Z({label:e,min:n,max:a,required:r,readonly:l,disabled:o,width:u,value:s,...c}={},{type:f,format:p,...m}){const h=t.html`<input type=${f} name=date readonly=${l} disabled=${o} required=${r} min=${p(n)} max=${p(a)}>`;return U(t.html`<form class=inputs-3a86ea style=${i(u)}>
    ${d(e,h)}<div class=inputs-3a86ea-input>
      ${h}
    </div>
  </form>`,h,Y(s),c,m)}function Y(e){return e instanceof Date&&!isNaN(e)?e:"string"==typeof e?(t=e,n=null,b.test(t+="")?new Date(t):"function"==typeof n?n(t):n):null==e||isNaN(e=+e)?null:new Date(+e);var t,n}function B(e){return(e=Y(e))?e.toISOString().slice(0,10):e}function G(e){return(e=Y(e))?new Date(+e-1e3*e.getTimezoneOffset()*60).toISOString().slice(0,16):e}function J(e){return t.html`<div>${e}`}function Q(e,{template:t=J}={}){let n=(e=[...e]).map((({value:e})=>e));return Object.defineProperty(t(e),"value",{get(){for(let t=0,i=e.length;t<i;++t){const i=e[t].value;Object.is(i,n[t])||(n=[...n],n[t]=i)}return n},set(t=[]){for(let n=0,i=e.length;n<i;++n)e[n].value=t[n]}})}function X(e){return t.html`<div>${Object.values(e)}`}function ee(e,{template:t=X}={}){e={...e};let n=Object.fromEntries(Object.entries(e).map((([e,{value:t}])=>[e,t])));return Object.defineProperty(t(e),"value",{get(){for(const t in n){const i=e[t].value;Object.is(i,n[t])||(n={...n},n[t]=i)}return n},set(t={}){for(const n in e)e[n].value=t[n]}})}const te=1e-6;function ne({extent:[e,n],range:a},{format:l=k,transform:s,invert:c,label:f="",value:p,step:m,disabled:h,placeholder:v,validate:b=o,width:y}={}){let g;if("function"!=typeof l)throw new TypeError("format is not a function");(null==e||isNaN(e=+e))&&(e=-1/0),(null==n||isNaN(n=+n))&&(n=1/0),e>n&&([e,n]=[n,e],void 0===s&&(s=ie)),void 0!==m&&(m=+m);const $=t.html`<input type=number min=${isFinite(e)?e:null} max=${isFinite(n)?n:null} step=${null==m?"any":m} name=number required placeholder=${v} oninput=${function(e){const t=A($.valueAsNumber);if(isFinite(t)&&(a&&(a.valueAsNumber=s(t)),b($)))return void(g=t);e&&e.stopPropagation()}} disabled=${h}>`;let w;if(a){if(void 0===s&&(s=u),"function"!=typeof s)throw new TypeError("transform is not a function");if(void 0===c&&(c=void 0===s.invert?(x=s)===u||x===ie?x:x===Math.sqrt?ae:x===Math.log?Math.exp:x===Math.exp?Math.log:e=>function(e,t,n){let i,a,r,l=100;n=void 0===n?0:+n,t=+t;do{a=e(n),r=e(n+te),a===r&&(r=a+te),n-=i=-1*te*(a-t)/(a-r)}while(l-- >0&&Math.abs(i)>te);return l<0?NaN:n}(x,e,e):s.invert),"function"!=typeof c)throw new TypeError("invert is not a function");let i=+s(e),r=+s(n);i>r&&([i,r]=[r,i]),a=t.html`<input type=range min=${isFinite(i)?i:null} max=${isFinite(r)?r:null} step=${void 0===m||s!==u&&s!==ie?"any":m} name=range oninput=${function(t){const i=A(c(a.valueAsNumber));if(isFinite(i)&&($.valueAsNumber=Math.max(e,Math.min(n,i)),b($)))return g=$.valueAsNumber,void($.value=l(g));t&&t.stopPropagation()}} disabled=${h}>`,w=s===u?a:t.html`<input type=range min=${e} max=${n} step=${void 0===m?"any":m} name=range disabled=${h}>`}else a=null,s=c=u;var x;const N=t.html`<form class=inputs-3a86ea style=${i(y)}>
    ${d(f,$)}<div class=inputs-3a86ea-input>
      ${$}${a}
    </div>
  </form>`;function A(t){return w?(t=Math.max(e,Math.min(n,t)),isFinite(t)?(w.valueAsNumber=t,w.valueAsNumber):t):+t}return N.addEventListener("submit",r),Object.defineProperty(N,"value",{get:()=>g,set(e){e=A(e),isFinite(e)&&($.valueAsNumber=e,a&&(a.valueAsNumber=s(e)),b($)&&(g=e,$.value=l(g)))}}),void 0===p&&w&&(p=w.valueAsNumber),void 0!==p&&(N.value=p),N}function ie(e){return-e}function ae(e){return e*e}function re(e){const t=`${e}`.split(/\s+/g).filter((e=>e)).map(ue);return e=>{if(null==e)return!1;if("object"==typeof e)e:for(const n of t){for(const t of oe(e))if(n.test(t))continue e;return!1}else for(const n of t)if(!n.test(e))return!1;return!0}}function le(e){return t=>{const n=`${t}`.split(/\s+/g).filter((e=>e)).map(ue);return t=>{e:for(const i of n){for(const n of e)if(i.test(t[n]))continue e;return!1}return!0}}}function*oe(e){for(const t in e)yield e[t]}function ue(e){return new RegExp(`(?:^|[^\\p{L}-])${function(e){return e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}(e)}`,"iu")}const se=A((e=>{const t=$(e);return e=>`${t(e)} result${1===e?"":"s"}`})),ce=j({render(e,n,a,r,{format:l,multiple:o,size:u,label:s,width:c}){const f=t.html`<select class=inputs-3a86ea-input disabled=${!0===r} multiple=${o} size=${u} name=input>
      ${n.map((n=>t.html`<option value=${n} disabled=${"function"==typeof r&&r(n)} selected=${a(n)}>${y(l(e[n],n,e))}`))}
    </select>`;return[t.html`<form class=inputs-3a86ea style=${i(c)}>${d(s,f)}${f}`,f]},selectedIndexes:e=>Array.from(e.selectedOptions,(e=>+e.value)),select(e,t){e.selected=t}}),de=22;function fe({root:e,id:i},a,{columns:r=m(a),value:l,required:o=!0,sort:s,reverse:c=!1,format:d,locale:p,align:h,header:v,rows:b=11.5,width:y={},multiple:w=!0,select:x=!0,layout:k}={}){r=void 0===r?function(e){const t=new Set;for(const n of e)for(const e in n)t.add(e);return Array.from(t)}(a):f(r),void 0===k&&(k=r.length>=12?"auto":"fixed"),d=function(e={},t,n,i){const a=Object.create(null);for(const r of n)if(r in e)a[r]=e[r];else switch(he(t,r)){case"number":a[r]=$(i);break;case"date":a[r]=N;break;default:a[r]=g(i)}return a}(d,a,r,p),h=function(e={},t,n){const i=Object.create(null);for(const a of n)a in e?i[a]=e[a]:"number"===he(t,a)&&(i[a]="right");return i}(h,a,r);let A=[],O=[],z=a[Symbol.iterator](),j=0,M=function(e){if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("function"==typeof e.numRows)return e.numRows()}(a),q=L(2*b);function C(){j>=0&&(j=z=void 0,O=Uint32Array.from(A=f(a),((e,t)=>t)),M=O.length)}function L(e){if(e=Math.floor(e),void 0!==M)return Math.min(M,e);if(e<=j)return e;for(;e>j;){const{done:e,value:t}=z.next();if(e)return M=j;O.push(j++),A.push(t)}return j}let D=null,P=!1,_=new Set,F=null,I=null;const U=t.html`<tbody>`,K=t.html`<tr><td>${x?t.html`<input type=${w?"checkbox":"radio"} name=${w?null:"radio"}>`:null}</td>${r.map((()=>t.html`<td>`))}`,H=t.html`<tr><th>${x?t.html`<input type=checkbox onclick=${function(e){if(C(),this.checked){_=new Set(O);for(const e of U.childNodes)pe(e).checked=!0}else{for(let e of _)W(e);F=I=null,e.detail&&e.currentTarget.blur()}J()}} disabled=${!w}>`:null}</th>${r.map((e=>t.html`<th title=${e} onclick=${t=>G(t,e)}><span></span>${v&&e in v?v[e]:e}</th>`))}</tr>`;function R(e,t){if(j===e){for(;e<t;++e)V(z.next().value,e);j=t}else for(let n;e<t;++e)n=O[e],V(A[n],n)}function V(e,t){const n=K.cloneNode(!0),i=pe(n);if(null!=i&&(i.onclick=B,i.checked=_.has(t),i.value=t),null!=e)for(let i=0;i<r.length;++i){let l=r[i],o=e[l];T(o)&&(o=d[l](o,t,a),o instanceof Node||(o=document.createTextNode(o)),n.childNodes[i+1].appendChild(o))}U.append(n)}function W(e){C();let t=O.indexOf(e);if(t<U.childNodes.length){pe(U.childNodes[t]).checked=!1}_.delete(e)}function Z(e){C();let t=O.indexOf(e);if(t<U.childNodes.length){pe(U.childNodes[t]).checked=!0}_.add(e)}function*Y(e,t){if(C(),(e=O.indexOf(e))<(t=O.indexOf(t)))for(;e<=t;)yield O[e++];else for(;t<=e;)yield O[t++]}function B(e){C();let t=+this.value;if(w)if(e.shiftKey){if(null===F)F=_.size?function(e){return e[Symbol.iterator]().next().value}(_):O[0];else for(let e of Y(F,I))W(e);I=t;for(let e of Y(F,I))Z(e)}else F=I=t,_.has(t)?(W(t),F=I=null,e.detail&&e.currentTarget.blur()):Z(t);else{for(let e of _)W(e);Z(t)}J()}function G(t,n){C();const i=t.currentTarget;let a;if(D===i&&t.metaKey)me(D).textContent="",D=null,P=!1,a=S;else{D===i?P=!P:(D&&(me(D).textContent=""),D=i,P=t.altKey);const e=P?E:S;a=(t,i)=>e(A[t][n],A[i][n]),me(i).textContent=P?"▾":"▴"}for(O.sort(a),_=new Set(Array.from(_).sort(a)),e.scrollTo(e.scrollLeft,0);U.firstChild;)U.firstChild.remove();R(0,q=L(2*b)),F=I=null,J()}function J(){const e=pe(H);null!=e&&(e.disabled=!w&&!_.size,e.indeterminate=w&&_.size&&_.size!==M,e.checked=_.size,l=void 0)}if(e.appendChild(t.html.fragment`<table style=${{tableLayout:k}}>
  <thead>${L(1)||r.length?H:null}</thead>
  ${U}
</table>
<style>${r.map(((e,t)=>{const a=[];if(null!=h[e]&&a.push(`text-align:${h[e]}`),null!=y[e]&&a.push(`width:${n(y[e])}`),a.length)return`#${i} tr>:nth-child(${t+2}){${a.join(";")}}`})).filter(u).join("\n")}</style>`),e.addEventListener("scroll",(()=>{e.scrollHeight-e.scrollTop<b*de*1.5&&q<L(q+1)&&R(q,q=L(q+b))})),void 0===s&&c&&(C(),O.reverse()),void 0!==l){if(C(),w){const e=new Set(l);_=new Set(O.filter((t=>e.has(A[t]))))}else{const e=A.indexOf(l);_=e<0?new Set:new Set([e])}J()}if(L(1)?R(0,q):U.append(t.html`<tr>${r.length?t.html`<td>`:null}<td rowspan=${r.length} style="padding-left: var(--length3); font-style: italic;">No results.</td></tr>`),void 0!==s){let e=r.indexOf(s);e>=0&&(c&&(D=H.childNodes[e+1]),G({currentTarget:H.childNodes[e+1]},r[e]))}return Object.defineProperty(e,"value",{get(){if(void 0===l)if(C(),w)(l=Array.from(o&&0===_.size?O:_,(e=>A[e]))).columns=r;else if(_.size){const[e]=_;l=A[e]}else l=null;return l},set(e){if(C(),w){const t=new Set(e),n=new Set(O.filter((e=>t.has(A[e]))));for(const e of _)n.has(e)||W(e);for(const e of n)_.has(e)||Z(e)}else{const t=A.indexOf(e);_=t<0?new Set:new Set([t])}l=void 0}})}function pe(e){return e.firstChild.firstChild}function me(e){return e.firstChild}function he(e,t){if("function"==typeof(n=e).getChild&&"function"==typeof n.toArray&&n.schema&&Array.isArray(n.schema.fields))return function(e,t){const n=e.schema.fields.find((e=>e.name===t));switch(n?.type.typeId){case 8:case 10:return 1===n.type.unit?"date":"number";case 2:case 3:case 7:case 9:return"number"}}(e,t);var n;for(const n of e){if(null==n)continue;const e=n[t];if(null!=e)return"number"==typeof e?"number":e instanceof Date?"date":void 0}}function ve(e){return new Promise((t=>{requestAnimationFrame((()=>{const n=e.closest(".observablehq");if(!n)return t();const i=new MutationObserver((()=>{n.contains(e)||(i.disconnect(),t())}));i.observe(n,{childList:!0})}))}))}function be(e,t){const n=function(e){switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;case"file":return e.multiple?e.files:e.files[0];default:return e.value}}(t);switch(e.type){case"range":case"number":e.valueAsNumber=n;break;case"date":e.valueAsDate=n;break;case"checkbox":e.checked=n;break;case"file":e.multiple?e.files=n:e.files=[n];break;default:e.value=n}}function ye(e){switch(e.type){case"button":case"submit":return"click";case"file":return"change";default:return"input"}}e.bind=function(e,t,n=ve(e)){const i=ye(t),r=()=>be(e,t);return r(),e.addEventListener(ye(e),(()=>(be(t,e),t.dispatchEvent(new Event(i,a))))),t.addEventListener(i,r),n.then((()=>t.removeEventListener(i,r))),e},e.button=function(e="≡",{label:i="",value:a,reduce:o,disabled:s,required:c=!1,width:f}={}){const p="string"==typeof e||e instanceof Node;p?(c||void 0!==a||(a=0),void 0===o&&(o=(e=0)=>e+1),s=new Set(s?[e]:[]),e=[[e,o]]):(c||void 0!==a||(a=null),s=new Set(!0===s?Array.from(e,(([e])=>e)):s||void 0));const m=t.html`<form class=inputs-3a86ea>`;m.addEventListener("submit",r);const h={width:n(f)},v=Array.from(e,(([e,n=u])=>{if("function"!=typeof n)throw new TypeError("reduce is not a function");return t.html`<button disabled=${s.has(e)} style=${h} onclick=${e=>{m.value=n(m.value),l(e)}}>${e}`}));return(i=d(i,p?v[0]:void 0))&&m.append(i),m.append(...v),m.value=a,m},e.checkbox=L,e.color=function({label:e,value:n,required:a,datalist:r,readonly:l,disabled:o,width:u,...s}={}){const[f,p]=I(r),m=c(),h=t.html`<input
    type=color
    name=text
    value=${n}
    id=${m}
    list=${p}
    readonly=${l}
    disabled=${o}
    required=${a}
  >`,v=t.html`<output
    for=${m}
  >`;return v.value=h.value,h.addEventListener("input",(()=>v.value=h.value)),U(t.html`<form class=inputs-3a86ea style=${i(u)}>
    ${d(e,h)}<div class=inputs-3a86ea-input>
      <div class=inputs-3a86ea-input>${h}${v}</div>
    </div>${f}
  </form>`,h,n,s,{after:e=>h.parentNode.after(e)})},e.date=function(e){return Z(e,V)},e.datetime=function(e){return Z(e,W)},e.disposal=ve,e.email=function(e){return K({...e,type:"email"})},e.file=function({label:e,required:n,accept:a,capture:r,multiple:l,disabled:o,width:u,value:s,submit:c,transform:f=e=>e,...p}={}){const m=t.html`<input
    type=file
    name=file
    disabled=${o}
    required=${n}
    accept=${a}
    capture=${r}
    multiple=${l}
  >`;return U(t.html`<form class=inputs-3a86ea style=${i(u)}>
    ${d(e,m)}<div class=inputs-3a86ea-input>
      ${m}
    </div>
  </form>`,m,void 0,p,{get:e=>l?Array.from(e.files,(e=>f(e))):e.files.length?f(e.files[0]):null,set:()=>{},same:()=>!1})},e.form=function(e,t){return(Array.isArray(e)?Q:ee)(e,t)},e.formatAuto=w,e.formatDate=N,e.formatLocaleAuto=g,e.formatLocaleNumber=$,e.formatNumber=x,e.formatTrim=k,e.input=function(e){const t=new EventTarget;return t.value=e,t},e.number=function(e,t){return arguments.length<2&&(t=e,e=void 0),void 0===e&&(e=[]),ne({extent:e},t)},e.password=function(e){return K({...e,type:"password"})},e.radio=C,e.range=function(e=[0,1],t){return ne({extent:e,range:!0},t)},e.search=function(e,{locale:n,format:a=se(n),label:l,query:o="",placeholder:u="Search",columns:s=m(e),spellcheck:c,autocomplete:p,autocapitalize:h,filter:v=(void 0===s?re:le(s)),datalist:b,disabled:g,required:$=!0,width:w}={}){let x=[];e=f(e),$=!!$;const[k,N]=I(b),A=t.html`<input
    name=input
    type=search
    list=${N}
    disabled=${g}
    spellcheck=${H(c)}
    autocomplete=${R(p)}
    autocapitalize=${R(h)}
    placeholder=${u}
    value=${o}
    oninput=${T}
  >`,S=t.html`<output name=output>`,E=t.html`<form class=inputs-3a86ea style=${i(w)}>
    ${d(l,A)}<div class=inputs-3a86ea-input>
      ${A}${S}
    </div>${k}
  </form>`;function T(){x=A.value||$?e.filter(v(A.value)):[],void 0!==s&&(x.columns=s),S.value=a(x.length)}return E.addEventListener("submit",r),T(),Object.defineProperties(E,{value:{get:()=>x},query:{get:()=>o,set(e){o=A.value=y(e),T()}}})},e.searchFilter=re,e.select=ce,e.table=function(e,i={}){const{rows:a=11.5,height:r,maxHeight:l=(void 0===r?(a+1)*de-1:void 0),width:o={},maxWidth:u}=i,s=c(),d=t.html`<form class="inputs-3a86ea inputs-3a86ea-table" id=${s} style=${{height:n(r),maxHeight:n(l),width:"string"==typeof o||"number"==typeof o?n(o):void 0,maxWidth:n(u)}}>`;return e&&"function"==typeof e.then?(Object.defineProperty(d,"value",{configurable:!0,set(){throw new Error("cannot set value while data is unresolved")}}),Promise.resolve(e).then((e=>fe({root:d,id:s},e,i)))):fe({root:d,id:s},e,i),d},e.tel=function(e){return K({...e,type:"tel"})},e.text=K,e.textarea=function({value:e="",label:n,placeholder:r,spellcheck:l,autocomplete:o,autocapitalize:u,rows:s=3,minlength:c,maxlength:f,required:p=c>0,readonly:m,disabled:h,monospace:v=!1,resize:b=s<12,width:y,...g}={}){const $=t.html`<textarea
    name=text
    readonly=${m}
    disabled=${h}
    required=${p}
    rows=${s}
    minlength=${c}
    maxlength=${f}
    spellcheck=${H(l)}
    autocomplete=${R(o)}
    autocapitalize=${R(u)}
    placeholder=${r}
    onkeydown=${function(e){if(g.submit&&"Enter"===e.key&&(e.metaKey||e.ctrlKey))return w.dispatchEvent(new Event("submit",a))}}
    style=${{width:y,fontFamily:v?"var(--monospace, monospace)":null,resize:b?null:"none"}}
  >`,w=t.html`<form class="inputs-3a86ea inputs-3a86ea-textarea" style=${i(y)}>
    ${d(n,$)}<div>
      ${$}
    </div>
  </form>`;return U(w,$,e,g)},e.toggle=function({label:e,value:n,values:i,disabled:a}={}){const r=t.html`<input class=inputs-3a86ea-input type=checkbox name=input disabled=${a}>`,l=t.html`<form class="inputs-3a86ea inputs-3a86ea-toggle">${d(e,r)}${r}`;return Object.defineProperty(l,"value",{get:()=>void 0===i?r.checked:i[r.checked?0:1],set(e){r.checked=void 0===i?!!e:e===i[0]}}),void 0!==n&&(l.value=n),l},e.url=function(e){return K({...e,type:"url"})},e.version="0.12.0",Object.defineProperty(e,"__esModule",{value:!0})}));
